<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tes Tingkat Flow Karyawan</title>
    <style>
        :root {
            --primary-blue: #007bff;
            --light-blue: #e9f5ff;
            --dark-blue: #0056b3;
            --text-color: #333;
            --light-gray: #f4f7f9;
            --border-color: #dee2e6;
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--light-gray);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 800px;
            background-color: #fff;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            overflow: hidden;
        }

        header {
            background-color: var(--primary-blue);
            color: #fff;
            padding: 20px;
            text-align: center;
        }

        header h1 {
            margin: 0;
            font-size: 1.8em;
        }

        main {
            padding: 25px;
        }

        .instructions {
            background-color: var(--light-blue);
            border-left: 5px solid var(--primary-blue);
            padding: 15px;
            margin-bottom: 25px;
            border-radius: 5px;
            font-size: 0.95em;
            line-height: 1.6;
        }

        #progress-container {
            margin-bottom: 20px;
        }

        #progress-bar {
            width: 100%;
            background-color: #e9ecef;
            border-radius: 5px;
            height: 10px;
            overflow: hidden;
        }

        #progress-bar-inner {
            height: 100%;
            width: 0%;
            background-color: var(--primary-blue);
            transition: width 0.3s ease;
        }
        
        #progress-text {
            text-align: center;
            margin-top: 5px;
            font-size: 0.9em;
            color: #6c757d;
        }

        .question-card {
            background-color: #fff;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            transition: box-shadow 0.2s;
        }

        .question-card:focus-within {
             box-shadow: 0 0 0 2px var(--light-blue);
        }
        
        .question-text {
            margin: 0 0 15px 0;
            font-weight: 500;
            line-height: 1.5;
        }

        .options-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .options-container .label {
            font-size: 0.85em;
            color: #6c757d;
            flex: 1;
            text-align: center;
        }
        
        .options-container .label:first-child { text-align: left; }
        .options-container .label:last-child { text-align: right; }

        .radio-group {
             display: flex;
             justify-content: center;
             flex: 3;
        }

        .radio-group input[type="radio"] {
            opacity: 0;
            position: fixed;
            width: 0;
        }
        
        .radio-group label {
            display: inline-block;
            width: 35px;
            height: 35px;
            margin: 0 5px;
            border-radius: 50%;
            border: 2px solid var(--border-color);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .radio-group input[type="radio"]:checked + label {
            background-color: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }

        .radio-group input[type="radio"]:focus + label {
            box-shadow: 0 0 0 3px var(--light-blue);
        }
        
        .submit-container {
            text-align: center;
            margin-top: 30px;
        }

        #submit-btn {
            background-color: var(--primary-blue);
            color: #fff;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        #submit-btn:hover:not(:disabled) {
            background-color: var(--dark-blue);
        }

        #submit-btn:disabled {
            background-color: #a0c9ff;
            cursor: not-allowed;
        }

        #results {
            display: none;
            padding: 20px;
            animation: fadeIn 0.5s ease-in-out;
            text-align: center;
        }

        #results h2 {
            color: var(--primary-blue);
            margin-bottom: 25px;
        }

        .score-display {
            margin-bottom: 20px;
        }
        
        .score-display h3 {
            margin: 0 0 10px 0;
            font-size: 1.2em;
        }

        .global-score {
            font-size: 3.5em;
            font-weight: bold;
            color: var(--dark-blue);
        }
        
        .global-score span {
            font-size: 0.5em;
            font-weight: normal;
            color: #6c757d;
        }

        .dimension-scores {
            display: grid;
            gap: 20px;
            margin-top: 30px;
        }
        
        .dimension-score-card {
            background: var(--light-blue);
            padding: 15px;
            border-radius: 8px;
        }
        
        .dimension-score-card .score-bar-container {
            background-color: #d1e7ff;
            border-radius: 5px;
            height: 15px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .dimension-score-card .score-bar {
            height: 100%;
            background-color: var(--primary-blue);
            border-radius: 5px;
        }
        
        .dimension-score-card p { margin: 0; }
        .dimension-score-card p strong { font-size: 1.5em; }

        footer {
            text-align: center;
            padding: 20px;
            font-size: 0.8em;
            color: #6c757d;
            background-color: #f8f9fa;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @media (max-width: 600px) {
            body { padding: 0; }
            .container {
                border-radius: 0;
                box-shadow: none;
            }
            main { padding: 15px; }
            .radio-group label {
                width: 30px;
                height: 30px;
                margin: 0 2px;
            }
            .options-container { flex-direction: column; }
            .radio-group { margin: 10px 0; }
        }

    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>Tes Tingkat Flow Karyawan</h1>
        </header>

        <main>
            <div id="questionnaire">
                <div class="instructions">
                    <p>Pertanyaan di bawah ini berkaitan dengan pikiran dan perasaan yang mungkin Anda alami saat mengambil bagian dalam aktivitas terakhir Anda. Tidak ada jawaban yang benar atau salah. Pikirkan tentang bagaimana perasaan Anda selama aktivitas tersebut, lalu jawablah pertanyaan menggunakan skala peringkat yang tersedia. Harap beri peringkat pada pertanyaan-pertanyaan di bawah ini dalam kaitannya dengan momen optimal paling intens yang Anda alami dalam aktivitas tersebut.</p>
                </div>

                <div id="progress-container">
                    <div id="progress-bar">
                        <div id="progress-bar-inner"></div>
                    </div>
                    <p id="progress-text">0/9 Selesai</p>
                </div>

                <form id="pfs-form">
                    </form>
                
                <div class="submit-container">
                    <button id="submit-btn" type="button" disabled>Selesai & Lihat Hasil</button>
                </div>
            </div>

            <div id="results">
                <h2>Hasil Tes Flow Anda</h2>

                <div class="score-display">
                    <h3>Skor Flow Global Anda</h3>
                    <p class="global-score" id="global-score-value">0.00 <span>/ 100</span></p>
                </div>

                <div class="dimension-scores">
                    <div class="dimension-score-card">
                        <p><strong>Absorption</strong> (Penghayatan)</p>
                        <p><strong id="absorption-score">0.00</strong> / 7</p>
                        <div class="score-bar-container">
                             <div class="score-bar" id="absorption-bar" style="width: 0%;"></div>
                        </div>
                    </div>
                    <div class="dimension-score-card">
                        <p><strong>Effortless Control</strong> (Kontrol Mudah)</p>
                        <p><strong id="control-score">0.00</strong> / 7</p>
                        <div class="score-bar-container">
                             <div class="score-bar" id="control-bar" style="width: 0%;"></div>
                        </div>
                    </div>
                    <div class="dimension-score-card">
                        <p><strong>Intrinsic Reward</strong> (Imbalan Intrinsik)</p>
                        <p><strong id="reward-score">0.00</strong> / 7</p>
                        <div class="score-bar-container">
                             <div class="score-bar" id="reward-bar" style="width: 0%;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>Berdasarkan Psychological Flow Scale (PFS), Norsworthy, C., dkk. (2023). Digunakan untuk tujuan riset dan edukasi non-komersial.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // ===== BAGIAN YANG DIPERBAIKI =====
            const questions = [
                "Saya tenggelam dalam tindakan/tugas.",
                "Saya sangat fokus pada tugas/aktivitas.",
                "Semua perhatian saya tertuju pada tugas/aktivitas.",
                "Saya merasa bisa dengan mudah mengontrol apa yang saya lakukan.",
                "Tindakan saya mengalir dengan mudah.",
                "Ada rasa kelancaran dalam tindakan saya.",
                "Saya merasa pengalaman itu berharga.",
                "Pengalaman itu terasa memuaskan.",
                "Saya ingin merasakan perasaan dari pengalaman itu lagi."
            ]; // <-- Kesalahan sebelumnya: Array ini tidak lengkap dan sintaksnya salah.

            const form = document.getElementById('pfs-form');
            const submitBtn = document.getElementById('submit-btn');
            const progressBarInner = document.getElementById('progress-bar-inner');
            const progressText = document.getElementById('progress-text');
            const totalQuestions = questions.length;
            const userAnswers = {};

            // Membuat dan menampilkan pertanyaan
            questions.forEach((q, index) => {
                const qNumber = index + 1;
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card';
                
                let optionsHTML = '';
                for (let i = 1; i <= 7; i++) {
                    optionsHTML += `
                        <input type="radio" id="q${qNumber}o${i}" name="q${qNumber}" value="${i}" required>
                        <label for="q${qNumber}o${i}">${i}</label>
                    `;
                }

                questionCard.innerHTML = `
                    <p class="question-text">${qNumber}. ${q}</p>
                    <div class="options-container">
                        <span class="label">Sangat Tidak Setuju</span>
                        <div class="radio-group">
                            ${optionsHTML}
                        </div>
                        <span class="label">Sangat Setuju</span>
                    </div>
                `;
                form.appendChild(questionCard);
            });
            
            // Event listener untuk memvalidasi form
            form.addEventListener('change', (event) => {
                if (event.target.type === 'radio') {
                    const questionName = event.target.name;
                    userAnswers[questionName] = parseInt(event.target.value);
                    updateProgress();
                }
            });

            function updateProgress() {
                const answeredCount = Object.keys(userAnswers).length;
                const progressPercentage = (answeredCount / totalQuestions) * 100;
                
                progressBarInner.style.width = `${progressPercentage}%`;
                progressText.textContent = `${answeredCount}/${totalQuestions} Selesai`;
                
                if (answeredCount === totalQuestions) {
                    submitBtn.disabled = false;
                }
            }
            
            // Event listener untuk tombol submit
            submitBtn.addEventListener('click', () => {
                const scores = Object.values(userAnswers);
                
                const originalGlobalScore = scores.reduce((a, b) => a + b, 0) / totalQuestions;
                const scaledGlobalScore = ((originalGlobalScore - 1) / (7 - 1)) * (100 - 1) + 1;

                const absorptionScore = (scores[0] + scores[1] + scores[2]) / 3;
                const controlScore = (scores[3] + scores[4] + scores[5]) / 3;
                const rewardScore = (scores[6] + scores[7] + scores[8]) / 3;

                displayResults({ 
                    globalScore: scaledGlobalScore, 
                    absorptionScore, 
                    controlScore, 
                    rewardScore 
                });
            });

            function displayResults(scores) {
                document.getElementById('questionnaire').style.display = 'none';
                document.getElementById('results').style.display = 'block';

                document.getElementById('global-score-value').innerHTML = `${scores.globalScore.toFixed(2)} <span>/ 100</span>`;
                
                document.getElementById('absorption-score').textContent = scores.absorptionScore.toFixed(2);
                document.getElementById('control-score').textContent = scores.controlScore.toFixed(2);
                document.getElementById('reward-score').textContent = scores.rewardScore.toFixed(2);
                
                document.getElementById('absorption-bar').style.width = `${(scores.absorptionScore / 7) * 100}%`;
                document.getElementById('control-bar').style.width = `${(scores.controlScore / 7) * 100}%`;
                document.getElementById('reward-bar').style.width = `${(scores.rewardScore / 7) * 100}%`;
            }
        });
    </script>
</body>
</html>